//Thanks to killjoy on #ForgeGradle for help
//original https://gist.github.com/killjoy1221/b4557d40b9972828a7fd

buildscript {
    repositories {
        jcenter()
        maven {
            name 'forge'
            url 'http://files.minecraftforge.net/maven/'
        }
    }
    dependencies {
        classpath 'net.minecraftforge.gradle:ForgeGradle:2.1-SNAPSHOT'
    }
}
apply plugin: 'net.minecraftforge.gradle.liteloader'

version = "1.0"
group = "com.example"
archivesBaseName = 'examplemod'
ext.revision = "2"

minecraft {
    version = "1.8"
    mappings = "stable_18"
    runDir = 'run'
}

processResources{
    // this will ensure that this task is redone when the versions change.
    def props = [
        version:    version,
        mcversion:  minecraft.version,
        revision:   revision
    ]
    inputs.properties props

    // replace stuff in litemod.json, nothing else
    from(sourceSets.main.resources.srcDirs) {
        include 'litemod.json'

        // replace version and mcversion
        expand props
    }

    // copy everything else, thats not the mcmod.info
    from(sourceSets.main.resources.srcDirs) {
        exclude 'litemod.json'
    }
}
